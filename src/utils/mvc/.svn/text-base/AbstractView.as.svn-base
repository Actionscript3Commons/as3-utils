package org.as3lib.mvc
{
	import flash.display.DisplayObject;
	import flash.display.MovieClip;
	
	import abstractAS3.AbstractEnforcer;
	
	public class AbstractView extends MovieClip implements IView
	{
		public function AbstractView ( model:*, controller:IController = null) {
			super();
			this.model = model;
			
			if (controller != null) {
				this.controller = controller;
			}
		}
		
		public function asDisplayObject():DisplayObject {
			return this;
		}
		
		public function get model():* { return _model; }
		public function set model(model:*):void { _model = model; }
		protected var _model:*;
		
		public function get controller():IController {
			// If a controller hasn't been defined yet...
			if (_controller == null) {
				// ...make one. Note that defaultController() is normally overridden 
				// by the AbstractView subclass so that it returns the appropriate
				// controller for the view.
				this.controller = getDefaultController( model );
			}
			return controller;
		}
		public function set controller(controller:IController):void {
			_controller = controller;
			controller.view = this;
		}
		protected var _controller:IController;
		
		public function getDefaultController( model:* ):IController {
			AbstractEnforcer.enforceMethod();
			return null;
		}
	}
}